let obj = [
   {
      name: "sushi frio",
      imag: "media/sushi.png",
      data: [
         {
            plat: "salmontino",
            ingr: "Pasta tampico, philadelphia, pepino, zanahoria, por fuera salmón ahumado y aguacate.",
            cost: 85
         }, {
            plat: "kioto roll",
            ingr: "Salmon sellado, philadelphia, pasta tampico y aguacate.",
            cost: 85
         }, {
            plat: "cangrejo roll",
            ingr: "Surimi empanizado, pepino, aguacate, alga por fuera y champiñon.",
            cost: 75
         }, {
            plat: "cheese roll",
            ingr: "Forrado de queso manchego. aderezo de chipotle, camaron empanizado , philadelphia y aguacate",
            cost: 75
         }, {
            plat: "dieta roll",
            ingr: "Surimi, philadelphia, aguacate envuelto en hoja de pepino.",
            cost: 75
         }, {
            plat: "loco roll",
            ingr: "Camaron, philadelphia, aguacate envuelto en tocino con queso manchego gratinado",
            cost: 75
         }, {
            plat: "macho roll",
            ingr: "Camaron empanizado, aguacate, philadelphia, envuelto en plátano frito y salsa de anguila.",
            cost: 70
         }, {
            plat: "green roll",
            ingr: "Camaron, pepino, aguacate, envuelto en kiwi con salsa de anguila.",
            cost: 70
         }, {
            plat: "amai maki",
            ingr: "Surimi empanizado, aguacate, philadelphia, pepino por fuera con salsa dulce picante.",
            cost: 70
         }, {
            plat: "kanikama maki",
            ingr: "Surimi, pasta tampico por dentro y por fuera.",
            cost: 70
         }, {
            plat: "tropical roll",
            ingr: "Surimi, pepino, philadelphia, envuelto en mango con salsa de anguila.",
            cost: 65
         }, {
            plat: "palto maki",
            ingr: "Camarón, pepino, philadelphia, aguacate por fuera y ajonjolí.",
            cost: 65
         }, {
            plat: "california maki",
            ingr: "Camaron, pepino, aguacate y ajonjolí por fuera.",
            cost: 55
         }
      ]
   },
   {
      name: "sushi empanizado",
      imag: "media/sushi3.png",
      data: [
         {
            plat: "delux roll",
            ingr: "Camaron empanizado, aguacate, philadelphia, empanizado por fuera gratinado con queso manchego al chipotle y tocino.",
            cost: 85
         },
         {
            plat: "mar y tierra",
            ingr: "Camaron, res, pollo en teriyaki, manchego, empanizado por fuera.",
            cost: 80
         },
         {
            plat: "dragon roll",
            ingr: "Res a la plancha, queso manchego, chiles toreados, empanizado por fuera.",
            cost: 80
         },
         {
            plat: "coco roll",
            ingr: "Surimi empanizado, aguacate, philadelphia, empanizado por fuera y dulce de coco.",
            cost: 75
         },
         {
            plat: "sweet roll",
            ingr: "Pollo en teriyaki, philadelphia, queso manchego, empanizado.",
            cost: 75
         },
         {
            plat: "hot roll",
            ingr: "Camaron empanizado, aguacate, philadelphia, empanizado por fuera y chipotle.",
            cost: 70
         },
         {
            plat: "dishi maki",
            ingr: "Surimi empanizado, aguacate, queso manchego con salsa dulce picante, empanizado por fuera.",
            cost: 75
         },
         {
            plat: "queso maki",
            ingr: "Philadelphia, queso manchego, empanizado. por fuera",
            cost: 60
         }
      ]
   },
   {
      name: "yakimeshi",
      imag: "media/sopa.png",
      data: [
         {
            plat: "yakimeshi verdura",
            ingr: "arroz frito, zanahoria, calabaza, huevo.",
            cost: 45
         },
         {
            plat: "yakimeshi hiyoko (pollo)",
            ingr: "arroz frito, pollo, zanahoria, calabaza, huevo.",
            cost: 50
         },
         {
            plat: "yakimeshi gyuniku (res)",
            ingr: "arroz frito, res, zanahoria, calabaza, huevo.",
            cost: 55
         },
         {
            plat: "yakimeshi surimi",
            ingr: "arroz frito, surimi, zanahoria, calabaza, huevo.",
            cost: 60
         }
      ]
   },
   {
      name: "pastas",
      imag: "media/ramen.png",
      data: [
         {
            plat: "pasta schezuan hiyoko",
            ingr: "pasta, pollo, zanahoria, calabaza, brocoli, champiñones, pimientos y cebollin.",
            cost: 65
         },
         {
            plat: "pasta schezuan gyuniku",
            ingr: "pasta, res, zanahoria, calabaza, brocoli, champiñones, pimientos y cebollin.",
            cost: 70
         }
      ]
   },
   {
      name: "teppanyaki ",
      imag: "media/teppanyaki.png",
      data: [
         {
            plat: "teppanyaki verdura",
            ingr: "verduras a la plancha, champiñones, calabaza, zanahoria, brocoli, pimiento, cebollin y arroz gohan.",
            cost: 45
         },
         {
            plat: "teppanyaki hiyoko (pollo)",
            ingr: "verduras a la plancha, pollo, champiñones, calabaza, zanahoria, brocoli, pimiento, cebollin y arroz gohan.",
            cost: 50
         },
         {
            plat: "teppanyaki gyuniku",
            ingr: "verduras a la plancha, res, champiñones, zanahoria, brocoli, pimiento y cebollin.",
            cost: 55
         },
      ]
   },
   {
      name: "temaki",
      imag: "media/temaki.png",
      data: [
         {
            plat: "temaki kappa-shako",
            ingr: "camaron, philadephia, pepino, zanahoria, ajonjolí.",
            cost: 55
         },
         {
            plat: "temaki vegetariano",
            ingr: "pepino, zanahoria, aguacate, philadelphia.",
            cost: 50
         },
      ]
   },
   {
      name: "kushiague",
      imag: "media/poke.png",
      data: [
         {
            plat: "kushi queso",
            ingr: "brocheta de queso manchego, philadelphia, empanizado.",
            cost: 35
         },
         {
            plat: "kushi ebi",
            ingr: "brocheta de camaron, philadelphia, empanizado.",
            cost: 35
         },
         {
            plat: "kushi surim ",
            ingr: "brocheta de surimi, philadelphia, empanizado.",
            cost: 30
         },
         {
            plat: "kushi banan ",
            ingr: "brocheta de plátano frito, philadelphia, empanizado.",
            cost: 25
         }
      ]
   },
   {
      name: "gyozas",
      imag: "media/gyoza.png",
      data: [
         {
            plat: "gyozas",
            ingr: "Rellenas de pollo sabor schezuan acompañado con verduras.",
            cost: 55
         }
      ]
   },
   {
      name: "tempura",
      imag: "media/poke.png",
      data: [
         {
            plat: "roshy roll",
            ingr: "surimi, aguacate por fuera en tempura con pasta tampico.",
            cost: 80
         },
      ]
   },
   {
      name: "sushi charola",
      imag: "media/bento.png",
      data: [
         {
            plat: "sushi empanizados",
            ingr: "charola sushi empanizado 30 piezas",
            cost: 200
         },
         {
            plat: "sushi surtidos",
            ingr: "charola sushi empanizado y frio 40 piezas",
            cost: 350
         },
         {
            plat: "sushi surtidos",
            ingr: "charola sushi empanizado y frio 30 piezas",
            cost: 270
         }
      ]
   },
   {
      name: "ramen",
      imag: "media/ramen.png",
      data: [
         {
            plat: "ramen res",
            ingr: "res, huevo, naruto, cebollin, zanahoria, calabaza, pasta ramen",
            cost: 75
         },
         {
            plat: "ramen surimi",
            ingr: "surimi en tempura, huevo, naruto, cebollin, zanahoria, calabaza, pasta ramen.",
            cost: 75
         }
      ]
   },
   {
      name: "poke",
      imag: "media/poke.png",
      data: [
         {
            plat: "poke amai toriniku",
            ingr: "pollo tempura en teriyaki, mango, pepino, ajonjolin, arroz gohan y alga nori.",
            cost: 65
         },
         {
            plat: "poke surimi terivyaki",
            ingr: "surimi tempura en teriyaki, mango, pepino, ajonjolin, arroz gohan y alga nori.",
            cost: 65
         }
      ]
   },
   {
      name: "bebidas",
      imag: "media/beer.png",
      data: [
         { plat: "nieve flotante limon", cost: 38 },
         { plat: "jarra de te helado", ingr:"Negro", cost: 40 },
         { plat: "vaso de te helado", ingr:"Negro", cost: 15 },
         { plat: "jarra de calpiña", cost: 50 },
         { plat: "vaso de calpiña", cost: 25 },
         { plat: "refresco lata", cost: 20 },
         { plat: "sake", cost: 15 },
      ]
   },
   {
      name: "postres",
      imag: "media/narutomaki.png",
      data: [
         {
            plat: "tempura helado classic",
            ingr: "cubierto con chocolate líquido.",
            cost: 40
         },
         {
            plat: "tempura helado crunchy",
            ingr: "cubierto con cajeta y nuez.",
            cost: 45
         },
         {
            plat: "tempura helado magic",
            ingr: "cubierto con chocolate líquido, crema batida, cereza y con bola de nieve sabor chocolate.",
            cost: 50
         },
         {
            plat: "nieve de limon",
            cost: 20
         }
      ]
   },
   {
      name: "extras",
      imag: "media/takoyaki.png",
      data: [
         { plat: "extra salsa de anguila", cost: 10 },
         { plat: "extra aderezo de chipotle", cost: 10 },
         { plat: "extra pasta tampco", cost: 15 },
         { plat: "extra wasabi", cost: 10 },
         { plat: "chiles toreados", cost: 10 },
         { plat: "extra wasabi", cost: 10 },
         { plat: "ingrediente extra", cost: 10 }
      ]
   },
]
const ordenesComponent = ({plat,pre,pz,tot}) =>{
   return `
      <div class="ordenMainCon">
         <div>
             <h3>${plat}</h3>
             <span>
                 <h4>$${pre} / ${pz}pz</h4>
             </span>
         </div>
         <b>$ ${tot}</b>
      </div>
   `
}
const subComponent = ({ plat, cost, ingr }) => {
   // <p>  ${data.plat} - ${data.cost} - ${data.ingr} </p>
   // console.log(plat);
   // console.log(ingr);
   if(ingr==undefined){
      ingr="";
   }
   return `
      <div data-name="${plat}" data-cost=${cost} >
         <strong class="canPlatillos" id="canPlatillos">0</strong>
         <span>
            <b>${plat}</b>
            <i>$${cost}</i>
         </span>
         <strong class="cancelarPlatillo" id="cancelarPlatillo">
            <svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
               <path d="M8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 14.5c-3.59 0-6.5-2.91-6.5-6.5s2.91-6.5 6.5-6.5 6.5 2.91 6.5 6.5-2.91 6.5-6.5 6.5z"></path>
               <path d="M10.5 4l-2.5 2.5-2.5-2.5-1.5 1.5 2.5 2.5-2.5 2.5 1.5 1.5 2.5-2.5 2.5 2.5 1.5-1.5-2.5-2.5 2.5-2.5z"></path>
            </svg>
         </strong>
         <small>${ingr}</small>
      </div>
   `;
};
const componente = (obj, long) => {
   return `
      <section longitud=${long}>
         <div>
             <picture>
                 <img src="${obj.imag}" alt="">
             </picture>
             <h2>${obj.name}</h2>
             <span class="downCotent" data-long=${long}>
                 <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"></path></svg>
             </span>
         </div>
         <nav>
         </nav>
      </section>
         `;
}
const scale = (el,bol) =>{
   el.style.transform= `scale(${bol ? '1' : '0'})`
}
const navegacion = document.getElementById("navegacion");
const platillos = document.getElementById("platillos");
const deposito = document.getElementById("deposito");
const domicilio = document.getElementById("domicilio");
const orden = document.getElementById("orden");
const inputPlatillos = document.getElementById("inputPlatillos");
const formPlatillos = document.getElementById("formPlatillos");
let elementActual;

formPlatillos.addEventListener("submit", e => {
   e.preventDefault();
   let inp = inputPlatillos.value;
   if (inp.length == 0) {
      alert("Por favor complete el campo")
   } else {
      if (/^\d{1,2}$/.test(inp)) {
         if (inp == "0") {
            platillos.style.transform = 'scale(0)'
            elementActual.classList.remove("ordenado")
         } else {
            elementActual.firstElementChild.innerHTML = inp
            elementActual.classList.add("ordenado")
            elementActual.setAttribute("data-plat", inp)
         }
         platillos.style.transform = 'scale(0)'
      } else {
         alert("Por favor complete el campo correctamente")
      }
      // console.log(elementActual);
   }
   inputPlatillos.value = "";
})
obj.map(o => {
   navegacion.innerHTML += componente({
      imag: o.imag,
      name: o.name.toUpperCase()
   }, o.data.length)
   o.data.map(d => {
      navegacion.lastElementChild.lastElementChild.innerHTML += subComponent(d)
   })
})
// document.querySelectorAll(".downCotent").forEach(dc => {
//    dc.addEventListener("click", () => {
//       let padre = dc.parentElement.parentElement;
//       padre.classList.contains("desplegado") ? [
//          padre.style.height = "58px",
//          padre.classList.remove("desplegado")
//       ] : [
//          padre.style.height = `${padre.scrollHeight + 10}px`,
//          padre.classList.add("desplegado")
//       ]
//    })
// })
document.querySelectorAll(".navegacion section > div").forEach(dl => {
   dl.addEventListener("click", () => {
      let padre = dl.parentElement;
      padre.classList.contains("desplegado") ? [
         padre.style.height = "58px",
         padre.classList.remove("desplegado")
      ] : [
         padre.style.height = `${padre.scrollHeight + 10}px`,
         padre.classList.add("desplegado")
      ]
   })
})

document.querySelectorAll("#navegacion > section nav div").forEach(pl => {
   pl.addEventListener("click", e => {
      // console.clear()
      let tar = e.target;
      let tag = e.target.tagName;
      let con = (
         (tag == "STRONG" || tag == "SPAN" || tag == "SMALL")
            ? tar.parentElement
            : (tag == "DIV") ? tar : (tag == "path")
               ? tar.parentElement.parentElement.parentElement
               : tar.parentElement.parentElement)
      
      if (tag == "path" || tag == "svg" || tag == "STRONG") {
         con.classList.remove("ordenado");
      } else {
         elementActual = con;
         inputPlatillos.focus()
         platillos.style.transform = 'scale(1)'
         // if (!con.classList.contains("ordenado")) {
         // } else {
         //    // if (tag == "path" || tag == "SVG" || tag == "STRONG") {
         //    //    con.classList.remove("ordenado");
         //    // } else {
         //       inputPlatillos.focus()
         //       platillos.style.transform = 'scale(1)'
         //    // }
         // }
      }
   })
})
document.getElementById("abrirOrden").addEventListener("click", ()=>{
   let con = document.getElementById("ordenMain")
   con.innerHTML="";
   let tot=0;
   let totfin=0;
   document.querySelectorAll(".ordenado").forEach(or => {
      tot= parseInt(or.getAttribute("data-cost")) * parseInt(or.getAttribute("data-plat"))
      totfin+=tot
      con.innerHTML+=ordenesComponent({
         plat: or.getAttribute("data-name"),
         pre: or.getAttribute("data-cost"),
         pz: or.getAttribute("data-plat"),
         tot: tot
      })
   })
   if(totfin > 0){
      document.querySelector(".tot b").innerHTML=`$ ${totfin}`
      orden.style.transform="scale(1)"
   } else{
      alert("Por favor ordene algo")
   }
})
document.getElementById("opcPago").addEventListener("click", e =>{
   let tar = e.target
   if(tar.tagName=="BUTTON"){
      ((tar.getAttribute("id")=="pagoDeposito") 
      ? deposito : domicilio).style.transform= `scale(1)`
   }
})
domicilio.addEventListener("click", e =>{
   if(e.target.getAttribute("id")=="domicilio"){
      orden.style.transform=`scale(0)`
      domicilio.style.transform=`scale(0)`
   }
})
deposito.addEventListener("click", e =>{
   if(e.target.getAttribute("id")=="deposito"){
      orden.style.transform=`scale(0)`
      deposito.style.transform=`scale(0)`
   }
})
orden.addEventListener("click", e =>{
   if(e.target.getAttribute("id")=="orden"){
      orden.style.transform=`scale(0)`
   }
})
